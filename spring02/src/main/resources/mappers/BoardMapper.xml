<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper 
 PUBLIC "-//mybatis.org/DTD Mapper 3.0//EN"
 "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 <mapper namespace="board">
	 <!-- 게시글 전체 목록 조회 -->
	 <select id="listAll" resultType="com.hatsnake.spring02.domain.BoardDTO">
	 	select bno, title, content, writer, regdate, viewcnt
	 	from board order by bno desc, regdate desc
	 </select>
	 
	 <!-- 게시글 작성 -->
	 <insert id="insert">
	 	insert into board (bno, title, content, writer) 
	 	values ((select nvl(max(bno)+1, 1) from board),
	 		#{title}, #{content}, #{writer}
	 	)
	 </insert>
	
	 <!-- 게시글 상세보기 조회 -->
	 <select id="view" resultType="com.hatsnake.spring02.domain.BoardDTO">
	 	 select * from board 
	 	 where bno = #{bno}
	 </select>
	 
	 <!-- 게시글 조회수 증가 처리 -->
	 <update id="increaseViewcnt">
	 	update board set viewcnt = viewcnt + 1
	 	where bno = #{bno}
	 </update>
	 
	 <!-- 게시글 수정 처리 -->
	 <update id="updateArticle">
	 	update board set 
	 	title = #{title}, content = #{content}
	 	where bno = #{bno}
	 </update>
	 
	 <!-- 게시글 삭제 처리 -->
	 <delete id="deleteArticle">
	 	delete from board
	 	where bno = #{bno}
	 </delete>
	 
 </mapper>